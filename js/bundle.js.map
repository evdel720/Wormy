{"version":3,"sources":["webpack/bootstrap b133833630cf43ce2f77","./js/main.js","./js/jquery_lite/jquery_lite.js","./js/jquery_lite/dom_node_collection.js","./js/board.js","./js/coord.js","./js/wormy_view.js","./js/wormy.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;;;;;;ACVD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;;AAGA;;;;;;;ACvDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;;;;;;;;AChHA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;;;;;ACvBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,wEAAuE;;AAEvE;AACA;;AAEA,4EAA2E;AAC3E,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,oBAAoB;AACnC;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b133833630cf43ce2f77\n **/","const $l = require('./jquery_lite/jquery_lite');\nconst WormyView = require('./wormy_view');\n\n$l( () => {\n  $l('.start').on('click', (e) => {\n    $l('.wormy').empty();\n    $l('h1').html(\"Wormy : )\");\n    $l('.start').html('Click Here to start!');\n    const wormyView = new WormyView($l('.wormy'));\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","const DOMNodeCollection = require('./dom_node_collection.js');\n\nfunction $l (selector) {\n  if (typeof selector === \"function\") {\n    document.addEventListener(\"DOMContentLoaded\", selector);\n    return;\n  }\n\n  let object = [selector];\n\n  if (typeof selector === \"string\") {\n    if (selector.indexOf(\"<\") === -1 ) {\n      selector = document.querySelectorAll(selector);\n      object = Array.from(selector);\n    } else {\n      let tag = selector.match(/<(.+)><\\//)[1];\n      object = [document.createElement(tag)];\n    }\n  }\n\n  return new DOMNodeCollection(object);\n}\n\n$l.prototype.extend = function (first, ...objects) {\n  objects.forEach((ob) => {\n    Object.keys(ob).forEach((key) => {\n      first.key = ob.key;\n    });\n  });\n\n  return first;\n};\n\n$l.prototype.ajax = function (options) {\n  const xhr = new XMLHttpRequest();\n  let defaults = {type: \"GET\",\n                  dataType: \"json\",\n                  error: () => console.log(\"error!\"),\n                  data: {}\n  };\n  options = this.extend(defaults, options);\n  xhr.open(options.type, options.url);\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      options.success(xhr.response);\n    } else {\n      options.error();\n    }\n  };\n\n  xhr.send(options.data);\n};\n\n\nmodule.exports = $l;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/jquery_lite/jquery_lite.js\n ** module id = 1\n ** module chunks = 0\n **/","class DOMNodeCollection {\n  constructor(htmlElements) {\n    this.htmlElements = htmlElements;\n  }\n\n  html(str) {\n    if (str === undefined) {\n      return [this.htmlElements[0].innerHTML];\n    } else {\n      this.htmlElements.forEach((el) => {\n        el.innerHTML = str;\n      });\n      return this.htmlElements;\n    }\n  }\n\n  empty() {\n    this.htmlElements.forEach((el) => {\n      el.innerHTML = \"\";\n    });\n    return this.htmlElements;\n  }\n\n  append(input) {\n    if (typeof input === \"string\") {\n      this.htmlElements.forEach((htmlEl) => {\n        htmlEl.innerHTML += input;\n      });\n    } else {\n      input.htmlElements.forEach((el) => {\n        this.htmlElements.forEach((htmlEl) => {\n          htmlEl.innerHTML += el.outerHTML;\n        });\n      });\n    }\n    return this.htmlElements;\n  }\n\n  attr(key, value) {\n    if (value === undefined) {\n      return this.htmlElements[0].getAttribute(key);\n    } else {\n      this.htmlElements.forEach((el) => {\n        el.setAttribute(key, value);\n      });\n    }\n  }\n\n  addClass(str) {\n    this.htmlElements.forEach((el) => {\n      el.className += \" \" + str;\n    });\n  }\n\n  removeClass(str) {\n    this.htmlElements.forEach((el) => {\n      let classNames = el.className.split(\" \");\n      if (classNames.includes(str)) {\n        classNames.splice(classNames.indexOf(str), 1);\n      }\n\n      el.className = classNames.join(\" \");\n    });\n  }\n\n  children() {\n    let kids = [];\n    this.htmlElements.forEach((el) => {\n      kids = kids.concat(el.children);\n    });\n\n    return kids;\n  }\n\n  parent() {\n    let parents = [];\n    this.htmlElements.forEach((el) => {\n      parents = parents.concat(el.parentNode);\n    });\n\n    return parents;\n  }\n\n  find(selector) {\n    let result = [];\n    this.htmlElements.forEach((el) => {\n      result = result.concat(el.querySelectorAll(selector));\n    });\n\n    return result;\n  }\n\n  remove() {\n    this.htmlElements.forEach((el) => {\n      el.outerHTML = \"\";\n    });\n  }\n\n  on(trigger, callback) {\n    this.htmlElements.forEach((el) => {\n      el.addEventListener(trigger, callback);\n    });\n  }\n\n  off(trigger, callback) {\n    this.htmlElements.forEach((el) => {\n      el.removeEventListener(trigger, callback);\n    });\n  }\n\n}\n\nmodule.exports = DOMNodeCollection;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/jquery_lite/dom_node_collection.js\n ** module id = 2\n ** module chunks = 0\n **/","const Wormy = require('./wormy');\n\nfunction Board(){\n  this.grid = 20;\n  this.wormy = new Wormy(this, this.getRandomPos());\n  this.apple = this.getRandomPos();\n}\n\nBoard.prototype.getRandomPos = function() {\n  let x = Math.floor(Math.random() * this.grid);\n  let y = Math.floor(Math.random() * this.grid);\n  return [x, y];\n};\n\nBoard.prototype.updateApple = function() {\n  this.apple = this.getRandomPos();\n};\n\nBoard.prototype.getIdxOfPos = function(pos) {\n  return parseInt(pos[1]) * this.grid + parseInt(pos[0]);\n};\n\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 4\n ** module chunks = 0\n **/","const directions = [\"N\", \"E\", \"S\", \"W\"];\nconst cardinal = [[0,-1],[1,0],[0,1],[-1,0]];\nconst oppositeSets = [\"NS\", \"SN\", \"EW\", \"WE\"];\n\nfunction Coord() {\n}\n\nCoord.prototype.plus = function(pos, direction) {\n  let cardIdx = directions.indexOf(direction);\n  let newPos = [pos[0] + cardinal[cardIdx][0], pos[1] + cardinal[cardIdx][1]];\n  return newPos;\n};\n\nCoord.prototype.equals = function(pos1, pos2){\n  return (pos1[0] === pos2[0] && pos1[1] === pos2[1]);\n};\n\nCoord.prototype.isOpposite = function(wormyDirection, keyDirection){\n  return oppositeSets.includes([wormyDirection, keyDirection].join(\"\"));\n};\n\n\nconst coord = new Coord();\n\nmodule.exports = coord;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/coord.js\n ** module id = 6\n ** module chunks = 0\n **/","const Board = require('./board');\nconst $l = require('./jquery_lite/jquery_lite');\nconst coord = require('./coord');\n\nfunction WormyView($el){\n  this.$el = $el;\n  this.board = new Board();\n  this.makeBoard();\n  this.interval = window.setInterval(this.step.bind(this), 100);\n\n  $l('body').on(\"keydown\", (event) => {\n    this.handleKeyEvent(event.keyCode);\n  });\n}\n\nWormyView.prototype.renderBoard = function() {\n  let cols = $l('li');\n  cols.attr(\"style\", \"\");\n  let appleIdx = this.board.getIdxOfPos(this.board.apple);\n  $l(cols.htmlElements[appleIdx]).attr(\"style\", \"background-color: red; border-radius: 10px\");\n\n  this.board.wormy.segments.forEach((segment) => {\n    let wormyIdx = this.board.getIdxOfPos(segment.split(\" \"));\n\n    $l(cols.htmlElements[wormyIdx]).attr(\"style\", \"background-color: green;  border-radius: 10px\");\n  });\n};\n\nWormyView.prototype.step = function() {\n  this.renderBoard();\n  if (this.board.wormy.alive) {\n    this.board.wormy.move();\n  } else {\n    $l('h1').html(\"Your wormy died : (\");\n    $l('.start').html('Click Here to retry!');\n    $l('.board').attr(\"style\", \"background-color: #ccc\");\n    window.clearInterval(this.interval);\n  }\n};\n\nWormyView.prototype.handleKeyEvent = function(keyCode) {\n  switch(keyCode) {\n    case 37:\n      this.board.wormy.turn(\"W\");\n      break;\n    case 38:\n      this.board.wormy.turn(\"N\");\n      break;\n    case 39:\n      this.board.wormy.turn(\"E\");\n      break;\n    case 40:\n      this.board.wormy.turn(\"S\");\n      break;\n  }\n};\n\nWormyView.prototype.makeBoard = function() {\n  let $newBoard = $l('<ul></ul>');\n  for (let i=0; i< this.board.grid; i++) {\n    let $newRow = $l('<ul></ul>');\n    $newRow.addClass(\"row\");\n    for (let j=0; j <this.board.grid; j++) {\n      $newRow.append('<li></li>');\n    }\n    $newBoard.append($newRow);\n  }\n  $newBoard.addClass(\"board\");\n  this.$el.append($newBoard);\n};\n\nmodule.exports = WormyView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/wormy_view.js\n ** module id = 7\n ** module chunks = 0\n **/","const coord = require('./coord');\n\nfunction Wormy(board, pos) {\n  this.direction = 'N';\n  this.head = pos;\n  this.segments = [this.head.join(\" \")];\n  this.wormyLength = 1;\n  this.board = board;\n  this.alive = true;\n}\n\nWormy.prototype.updateLength = function() {\n  this.wormyLength += 1;\n};\n\nWormy.prototype.move = function() {\n  let newPos = coord.plus(this.head, this.direction);\n\n  if (this.inGrid(newPos)) {\n    if (coord.equals(newPos, this.board.apple)) {\n      this.updateLength();\n      this.board.updateApple();\n    } else if (this.segments.includes(newPos.join(\" \"))) {\n      this.alive = false;\n      return;\n    }\n    this.segments.unshift(newPos.join(\" \"));\n    this.segments = this.segments.slice(0, this.wormyLength);\n    this.head = newPos;\n  } else {\n    this.alive = false;\n  }\n};\n\nWormy.prototype.inGrid = function(pos) {\n  let xValid = (pos[0] >= 0 && pos[0] < this.board.grid);\n  let yValid = (pos[1] >= 0 && pos[1] < this.board.grid);\n  return (xValid && yValid);\n};\n\nWormy.prototype.turn = function(newDirection){\n  if (!coord.isOpposite(this.direction, newDirection)) {\n    this.direction = newDirection;\n  }\n};\n\nmodule.exports = Wormy;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/wormy.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}